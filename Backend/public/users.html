<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Admin Panel – Users</title>

  <!-- Main Admin CSS -->
  <link rel="stylesheet" href="./css/admin.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

  <div class="admin-container">

    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar">
      <h2 id="adminName">Admin</h2>

      <a href="dashboard.html">
        <i class="fas fa-chart-line"></i> Dashboard
      </a>

      <a href="users.html" class="active">
        <i class="fas fa-users"></i> Users
      </a>

      <a href="lookups.html">
        <i class="fas fa-database"></i> Lookups
      </a>

      <a href="feedback.html">
        <i class="fas fa-comment-dots"></i> Feedback
      </a>

      <a href="reports.html">
        <i class="fas fa-flag"></i> Reports
      </a>

      <button onclick="logout()">Logout</button>
    </aside>

    <!-- ================= MAIN CONTENT ================= -->
    <main class="main-content">

      <!-- TOP BAR -->
      <header class="top-bar">
        <span>Users Management</span>

        <div class="profile">
          <img src="./images/admin.jpeg" alt="Admin" onclick="toggleMenu()" />

          <div id="menu" class="menu">
            <a href="dashboard.html">Dashboard</a>
            <a href="users.html">Users</a>
            <a href="lookups.html">Lookups</a>
            <a href="feedback.html">Feedback</a>
            <a href="reports.html">Reports</a>
            <button onclick="logout()">Logout</button>
          </div>
        </div>
      </header>

      <!-- PAGE TITLE -->
      <h1 class="page-title">Users Management</h1>

      <!-- ================= FILTER SECTION ================= -->
      <div class="filter-section">

        <input type="text" id="searchInput" placeholder="Search by name or email..." oninput="applyFilters()"
          class="filter-input" />

        <select id="roleFilter" onchange="applyFilters()" class="filter-select">
          <option value="all">All Roles</option>
          <option value="0">Users</option>
          <option value="1">Admins</option>
          <option value="2">Super Admins</option>
        </select>

        <select id="banFilter" onchange="applyFilters()" class="filter-select">
          <option value="all">All Status</option>
          <option value="0">Active</option>
          <option value="1">Banned</option>
        </select>

      </div>

      <!-- ================= USERS TABLE ================= -->
      <table>
        <thead>
          <tr>
            <th>UID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Ban</th>
            <th>Admin Action</th>
          </tr>
        </thead>

        <tbody id="usersTableBody">
          <!-- Filled dynamically by users.js -->
        </tbody>
      </table>
      <!-- ================= USER MODERATION MODAL ================= -->
      <div id="userModal" class="modal">
        <div class="modal-content">

          <div class="modal-header">
            <h2 id="modalTitle">User Profile</h2>
            <span class="close" onclick="closeUserModal()">✖</span>
          </div>

          <div id="modalBody" class="modal-scroll"></div>

        </div>
      </div>

      <style>
        .modal {
          display: none;
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, .6);
          backdrop-filter: blur(4px);
          z-index: 2000;
        }

        .modal-content {
          background: #fff;
          width: 90%;
          max-width: 850px;
          margin: 50px auto;
          padding: 25px;
          border-radius: 18px;
          box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 15px;
        }

        .modal-scroll {
          max-height: 70vh;
          overflow-y: auto;
          padding-right: 10px;
        }

        .user-section {
          margin-bottom: 25px;
          padding: 18px;
          background: #f4f5ff;
          border-radius: 14px;
        }

        .user-section h3 {
          margin: 0 0 8px 0;
        }

        .photo-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
          gap: 12px;
        }

        .photo-grid img {
          width: 100%;
          height: 150px;
          object-fit: cover;
          border-radius: 12px;
          border: 2px solid #ddd;
        }

        .action-area {
          margin-top: 20px;
          display: flex;
          gap: 12px;
        }

        .modal-btn {
          padding: 10px 14px;
          border-radius: 10px;
          border: none;
          cursor: pointer;
          font-weight: 600;
        }

        .btn-danger {
          background: #ff4d4f;
          color: white;
        }

        .btn-success {
          background: #2ecc71;
          color: white;
        }

        .btn-warning {
          background: #f1c40f;
          color: white;
        }
      </style>
    </main>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="./js/users.js"></script>

  <script>
    function logout() {
      localStorage.removeItem("admin");
      localStorage.removeItem("adminToken");
      window.location.href = "login.html";
    }

    function toggleMenu() {
      const menu = document.getElementById("menu");
      menu.style.display = menu.style.display === "block" ? "none" : "block";
    }
  </script>
  <script>
  const adminInfo = JSON.parse(localStorage.getItem("admin"));

  if (adminInfo) {
    document.getElementById("adminName").textContent =
      `Welcome Admin \n ${adminInfo.name}` || "Admin";
  }
</script>


</body>

</html>